<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width" />
<style>
body {
  margin: 0;
  font: 400 15px/1.8 "Lato", sans-serif;
}
parallax-img {
  background-image: url("assets/parallax.jpg");
  min-height: 100vh;
  background-size: 100vh 100vh;
  background-attachment: fixed;
  background-repeat: no-repeat;
  background-position-x: center;
  opacity: 0.75;
  display: flex;
  justify-content: center;
  align-items: center;
}
parallax-img span {
  padding: 10px;
  background-color: black;
  color: pink;
  font-size: 25px;
  text-transform: uppercase;
  letter-spacing: 10px;
  text-align: center;

}
@media screen and (max-width: 1050px) and (orientation: portrait) {
  parallax-img {
    min-height: 100vw;
    background-size: 100vw 100vw;
  }
}
.test {
  height: 100vh;
  background: pink;
}
</style>

<body>
  <div class="parallax"></div>
  <div class="test"></div>
  <div class="experienceList"></div>
</body>

<script>
'use strict';

/* --- utils --- */

function $(selector) {
  return document.querySelector(selector);
}


/* --- parallax web component --- */

class ParallaxImg extends HTMLElement {
  constructor() {
    super();

    this.state = {
      wait: false
    }
    this.throttle = this.throttle.bind(this);
    this.parallax = this.parallax.bind(this);
  }

  throttle(cb, delay) {
    if (this.state.wait) {
      return;
    };
    this.state.wait = true;
    cb();
    setTimeout(() => {
      this.state.wait = false;
    }, delay);
  }

  parallax() {
    this.throttle(() => {
      const x = document.scrollingElement.scrollTop

      this.style['background-position-y'] = parseInt(-x / 4) + 'px';
    }, 25);
  }

  connectedCallback() {
    const nameEl = document.createElement('span');
    nameEl.innerHTML = 'Paige Vogenthaler';

    this.append(nameEl);
    window.addEventListener('scroll', this.parallax);
  }
}

customElements.define('parallax-img', ParallaxImg);
document.body.replaceChild(new ParallaxImg, $('.parallax'));


/* --- experience list web component --- */

class ExperienceItem extends HTMLElement {
  constructor(itemData) {
    super();
    this.state = {
      data: itemData
    }
  }

  connectedCallback() {
    this.innerHTML = `${this.state.data.company} - ${this.state.data.jobTitle}`;
  }
}

customElements.define('experience-item', ExperienceItem);

class ExperienceList extends HTMLElement {
  constructor() {
    super();
    this.state = {
      experienceData: [
        {
          company: 'Vivid Seats',
          jobTitle: 'Software Engineer',
          jobDescription: 'I developed things'
        },
        {
          company: 'Oracle',
          jobTitle: 'Business Development Consultant',
          jobDescription: 'I sold things'
        }
      ]
    }
  }

  connectedCallback() {
    this.state.experienceData.forEach((itemData) => {
      this.append(new ExperienceItem(itemData));
    });
  }
}

customElements.define('experience-list', ExperienceList);
document.body.replaceChild(new ExperienceList, $('.experienceList'));

</script>

<body>
  <div id="app" />
  <script src="./bundle.js" type="text/javascript"></script>
</body>
</html>
